# SPA Routing - Redirect all non-existent paths to index.html for client-side routing
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  # Don't rewrite actual files or directories
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d

  # Rewrite all other requests to index.html (SPA routing)
  RewriteRule ^ index.html [QSA,L]
</IfModule>

# Disable caching for HTML files to always get latest version
<FilesMatch "\.html?$">
  Header set Cache-Control "no-cache, no-store, must-revalidate"
  Header set Pragma "no-cache"
  Header set Expires "0"
</FilesMatch>

# Cache static assets for 30 days (they have content hashes so they're unique)
<FilesMatch "\.(jpg|jpeg|png|gif|ico|css|js|svg)$">
  Header set Cache-Control "public, max-age=2592000"
</FilesMatch>

# Cache JSON data files for 1 hour
<FilesMatch "\.json$">
  Header set Cache-Control "public, max-age=3600"
</FilesMatch>

# Enable gzip compression
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json
</IfModule>
